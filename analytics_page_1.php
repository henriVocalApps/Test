<html lang="fr">
    <head>
    	<meta charset="utf-8">
    	<title>Alexa Designer</title>
    	
    	<!-- Chart.js Library -->
    	<script src="controller/Chart.js-master/Chart.js"></script>
    	<!-- Bootstrap -->
        <link href="controller/bootstrap/css/bootstrap.css" rel="stylesheet">
         <!-- jquery -->
        <script src="controller/bootstrap/js/jquery-2.1.0.min.js"></script>
        <!-- Include all compiled plugins (below), or include individual files as needed -->
        <script src="controller/bootstrap/js/bootstrap.js"></script>
        <!-- Controller Henri -->
        <script src="controller/dashboard-controller.js"></script>
        <!-- CSS Henri -->
        <link href="style/dashboard.css" rel="stylesheet">
        
    </head>		
	<body>
	   <div class="container-fluid">
            <div class="row" style="position:fixed; z-index: 1; background-color: #272D33; padding-bottom: 100%; width: 85px ; ">
                <div class="container-fluid" >
        		    <br>
        	        <br>
        	        <br>
        	        <a href="analytics_page_0.html" data-toggle="tooltip" data-placement="right" title="Over View">
        	            <img  src="dashboard.svg" onmouseover="this.src='dashboard_1.svg'" onmouseout="this.src='dashboard.svg'" height="50" width="50">
        	            </a>
        	        <br>
        	        <br>
        	        <a href="analytics_page_1.html" data-toggle="tooltip" data-placement="right" title="Users">
        	            <img src="active_users_1.svg" height="50" width="50"/>
        	        </a>
        	        <br>
        	        <br>
        	        <a href="analytics_page_2.html" data-toggle="tooltip" data-placement="right" title="Sessions">
        	            <img  src="conversation.svg" onmouseover="this.src='conversation_1.svg'" onmouseout="this.src='conversation.svg'" height="50" width="50">
        	        </a>
        	        <br>
        	        <br>
        	        <a href="analytics_page_3.html" data-toggle="tooltip" data-placement="right" title="Intents">
        	            <img  src="radar.svg" onmouseover="this.src='radar_1.svg'" onmouseout="this.src='radar.svg'" height="50" width="50">
        	        </a>
        	        <br>
        	        <br>
        	        <a href="analytics_page_4.html" data-toggle="tooltip" data-placement="right" title="User Log">
        	            <img  src="log.svg" onmouseover="this.src='log_1.svg'" onmouseout="this.src='log.svg'" height="50" width="50">
        	        </a>
                    <br>
                    <br>
                    <br>
                    <br>
                    <a href="#" data-toggle="tooltip" data-placement="right" title="API Key">
                        <img  src="key.svg" onmouseover="this.src='key_1.svg'" onmouseout="this.src='key.svg'" height="50" width="50">
                    </a>
    	        </div>
            </div>
            <div class="row" style="padding-bottom: 100%;padding-left: 85px; background-color: #F0F2F1;">
                <div class="container-fluid " style="padding: 50px;" >
                	       
        	        <!-- Users Pane-->
            		<div class="row" >				
                		<div class="panel panel-default" style="max-width:1020px; margin: 10px auto;">
                            <div class="panel-body">
                                
                                <!-- First Row-->
                                <div class="row" >
                                    <div class="container-fluid" >
                        			    <div class="in-line">
                    			            <h2>Users </h2>
                        					<h6 style="color:#E93122;" name="active_user_number_triangle" ><span class="glyphicon glyphicon-triangle-right" ></span></h6>
                        				    <h4 name="active_user_number" style="color:#E93122;">0</h4>
                        				    <h4> this week</h4>
                    				    </div>
                    				    <div class="row" >
                            			    <!-- Pane Content Left-->
                            				<div class="col-sm-8">
                            				    <br>
                            				    <div>
                                                    <canvas id="Users-Line-Chart" class="col-sm-12" style="height:200px"></canvas>
                                		    	</div>
                            				</div>
                            				<!-- Pane Content Right-->
                            				<div class="col-sm-4">			
                            				<h4 align="center">Users repartition</h4>
                            				    <div>
                                                    <canvas id="User-Repartition-Pie" />
                                                </div>
                                                <div id="User-Repartition-Pie-Legend" class="chart-legend"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- End First Row-->
                                
                                <br>
                                <br>
                                
                                <!-- Second Row-->
                                <div class="row" >
                                    <div class="container-fluid" >
                                        <h3>Evolution</h3>
                                        <br>
                                        
                                        <!-- Cord One-->
                        				<div class="col-sm-4" >
                            	            <div class="panel panel-default" style="background-image: linear-gradient(to bottom right, #3B4E67 35%, #289A9F 100%);">
                                                <div class="panel-body" style="min-height:91px">
                                                    <div class="media">
                                                      <div class="media-body">
                                                        <div class="in-line">
                                                            <h2 class="media-heading" name="active_user_evolution_sign" style="color:white;">+</h2>
                                                            <h2 class="media-heading" name="active_user_evolution" style="color:white;">0</h2>
                                                            <h2 class="media-heading" style="color:white;">%</h2>
                                                        </div>
                                                        <p style="color:white;">Active Users this week</p>
                                                      </div>
                                                      <div class="media-right">
                                                        <img class="media-object" src="active_users.svg" height="50" width="50">
                                                      </div>
                                                    </div>
                                                </div>
                                            </div>
                            	        </div>
                            	        
                            	        <!-- Cord Two-->
                            	        <div class="col-sm-4" >
                            	            <div class="panel panel-default" style="background-color: #3B4E67;">
                                                <div class="panel-body" style="min-height:91px">
                                                    <div class="media">
                                                      <div class="media-body">
                                                        <div class="in-line">
                                                            <h2 class="media-heading" name="returning_user_evolution_sign" style="color:white;">+</h2>
                                                            <h2 class="media-heading" name="returning_user_evolution" style="color:white;">0</h2>
                                                            <h2 class="media-heading" style="color:white;">%</h2>
                                                        </div>
                                                        <p style="color:white;">Returning Users this week</p>
                                                      </div>
                                                      <div class="media-right">
                                                        <img class="media-object" src="user.svg" height="50" width="50">
                                                      </div>
                                                    </div>
                                                </div>
                                            </div>
                            	        </div>
                            	        
                            	        <!-- Cord Three-->
                            	        <div class="col-sm-4" >
                            	            <div class="panel panel-default" style="background-color: #289A9F;">
                                                <div class="panel-body" style="min-height:91px">
                                                    <div class="media">
                                                      <div class="media-body">
                                                        <div class="in-line">
                                                            <div class="in-line">
                                                                <h2 class="media-heading" name="new_user_evolution_sign" style="color:white;">+</h2>
                                                                <h2 class="media-heading" name="new_user_evolution" style="color:white;">0</h2>
                                                                <h2 class="media-heading" style="color:white;">%</h2>
                                                            </div>
                                                        </div>
                                                        <p style="color:white;">New Users this week</p>
                                                      </div>
                                                      <div class="media-right">
                                                          <img class="media-object" src="new_user.svg" height="50" width="50">
                                                      </div>
                                                    </div>
                                                </div>
                                            </div>
                            	        </div>
                            	        
            	                    </div>
                                </div>
                                <!-- End Second Row-->
                                
                                <br>
                                <br>
                                
                                <!-- Third Row-->
                                <div class="row" >
                                    <div class="container-fluid" >
                                        <h3>Most active users</h3>
                                        <br>
                                        <div class="col-sm-6" >
                                            <div id="Most-Active-Users-Table"></div>
                                        </div>
                                    </div>
                                </div>
                                <!-- End Third Row-->
                                
                                
                            </div>	
            	        </div>
                    </div>
                    <!-- End Users Pane-->
                </div>
            </div>
        </div>
    </body>
    
	<script>
	window.onload = function(){
        
               

       

        $.ajax({
            url: 'bdd.php',
            type: 'POST',
            data : 'best_intent=test',
            dataType: 'json',
            success: function(json) {
               
                var activations = json.activations;
                var fleche = "up";
                var sign = "+";
                var evolutionUser = 0;

                setUserLine(json.dates_users,json.nb_new_users,json.nb_returning_users);
                setDataNumber("Returning_user_number",json.returning_users);
                setDataNumber("new_user_number",json.new_users);
                
                //User Pane Left Pie
                setUserRepartitionPie(json.new_users,json.returning_users); // (Number of New Users, Number of Returning Users)
                var n_user = json.new_users+json.returning_users;
                if(n_user<json.old_user){
                    fleche = "down";
                    sign = "-";
                }else{
                    fleche = "up";
                    sign = "+";
                }
                setDataNumber("active_user_number",n_user);
                setTriangelDirection("active_user_number_triangle",fleche);
                
                if(json.old_user!=0){
                    evolutionUser = ((n_user - json.old_user)/json.old_user)*100;
                }

                setDataNumber("active_user_evolution",Math.abs(evolutionUser));
                setDataSign("active_user_evolution_sign",sign);
            }
        });
    

     //User Table
            var tableName = "Most-Active-Users-Table";   
            var tableHead = new Array("User Id","Hits","Evolution");
            var tableBody = new Array(
                new Array("amzn1.ask.account.AFP3Z[...]8T7","27","+11%"),
                new Array("amzn1.ask.account.AFP3Z[...]7EI","24","+17%"),
                new Array("amzn1.ask.account.AFP3Z[...]G7J","12","-24%"),
                new Array("amzn1.ask.account.AFP3Z[...]JH8","8","+67%"),
                new Array("amzn1.ask.account.AFP3Z[...]BE6","3","-26%"),
                new Array("amzn1.ask.account.AFP3Z[...]J97","2","+23%")
            );
            
            setTable(tableName,tableHead,tableBody);
        }
    /*
        window.onload = function(){
            
            setDataNumber("active_user_number",1737);
            setTriangelDirection("active_user_number_triangle","down");
            
	        setDataNumber("active_user_evolution",43);
	        setDataSign("active_user_evolution_sign","+");
	        
	        setDataNumber("returning_user_evolution",12);
	        setDataSign("returning_user_evolution_sign","-");
	        
	        setDataNumber("new_user_evolution",65);
	        setDataSign("new_user_evolution_sign","+");
	        
	        setDataNumber("conversation_number",2876);
            setTriangelDirection("conversation_number_triangle","up");
	        setDataNumber("conversation_evolution_number",17);
	        setDataSign("conversation_evolution_sign","-");
	        
	        setDataNumber("intent_number",13476);
            setTriangelDirection("intent_number_triangle","down");
	        
	       //User Pane Right Line
		    setUserLine(
		        ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], //Lables
		        [250,200,250,134,124,50,64],    //Number of New Users
		        [0,10,70,130,120,150,200]       //Number of Returning Users
			);
            
           //User Pane Left Pie
			setUserRepartitionPie(70,100); // (Number of New Users, Number of Returning Users)
            
        	
            //Intent Table
            var tableName = "Most-Active-Users-Table";   
        	var tableHead = new Array("User Id","Hits","Evolution");
        	var tableBody = new Array(
        	    new Array("amzn1.ask.account.AFP3Z[...]8T7","27","+11%"),
        	    new Array("amzn1.ask.account.AFP3Z[...]7EI","24","+17%"),
        	    new Array("amzn1.ask.account.AFP3Z[...]G7J","12","-24%"),
        	    new Array("amzn1.ask.account.AFP3Z[...]JH8","8","+67%"),
        	    new Array("amzn1.ask.account.AFP3Z[...]BE6","3","-26%"),
        	    new Array("amzn1.ask.account.AFP3Z[...]J97","2","+23%")
        	);
        	
        	setTable(tableName,tableHead,tableBody);
		}
*/
	</script>
		<!-- end: JavaScript-->
</html>